#-----------------------------------------------------------
# Vivado v2020.1 (64-bit)
# SW Build 2902540 on Wed May 27 19:54:35 MDT 2020
# IP Build 2902112 on Wed May 27 22:43:36 MDT 2020
# Start of session at: Wed Jun  8 12:19:16 2022
# Process ID: 13918
# Current directory: /home/taylor/Documents/new_spgd
# Command line: vivado -source make_project.tcl
# Log file: /home/taylor/Documents/new_spgd/vivado.log
# Journal file: /home/taylor/Documents/new_spgd/vivado.jou
#-----------------------------------------------------------
start_gui
source make_project.tcl
update_compile_order -fileset sources_1
update_compile_order -fileset sources_1
connect_bd_net [get_bd_pins my_timer/ADC_CLK] [get_bd_pins ADC_REG/adc_clk] 
connect_bd_net [get_bd_pins my_timer/DAC_A_OUT] [get_bd_ports dac_dat_a_o]
connect_bd_net [get_bd_pins my_timer/DAC_B_OUT] [get_bd_ports dac_dat_b_o]
# ====================================================================================
# Generate output products and wrapper, add constraint 
generate_target all [get_files  $bd_path/system.bd]
make_wrapper -files [get_files $bd_path/system.bd] -top
add_files -norecurse $bd_path/hdl/system_wrapper.v
# Load RedPitaya constraint files
set files [glob -nocomplain cfg/*.xdc]
if {[llength $files] > 0} {
  add_files -norecurse -fileset constrs_1 $files
}
#set_property top system_wrapper [current_fileset]
set_property VERILOG_DEFINE {TOOL_VIVADO} [current_fileset]
set_property STRATEGY Flow_PerfOptimized_High [get_runs synth_1]
set_property STRATEGY Performance_NetDelay_high [get_runs impl_1]
group_bd_cells PS7 [get_bd_cells processing_system7_0] [get_bd_cells rst_ps7_0_50M] [get_bd_cells ps7_0_axi_periph] [get_bd_cells axi_gpio_0]
group_bd_cells ADC_BLOCK [get_bd_cells util_ds_buf_0] [get_bd_cells util_ds_buf_1] [get_bd_cells xlconcat_0] [get_bd_cells ADC_REG]
set_property top system_wrapper [current_fileset]
update_compile_order -fileset sources_1
regenerate_bd_layout
save_bd_design
launch_runs impl_1 -to_step write_bitstream -jobs 16
wait_on_run impl_1
update_module_reference system_my_timer_0
reset_run synth_1
launch_runs impl_1 -to_step write_bitstream -jobs 16
wait_on_run impl_1
update_module_reference system_my_timer_0
update_module_reference system_my_timer_0
reset_run synth_1
launch_runs impl_1 -to_step write_bitstream -jobs 16
wait_on_run impl_1
update_module_reference system_my_timer_0
reset_run synth_1
launch_runs impl_1 -to_step write_bitstream -jobs 16
wait_on_run impl_1
open_run impl_1
open_bd_design {/home/taylor/Documents/new_spgd/tmp/new_spgd/new_spgd.srcs/sources_1/bd/system/system.bd}
add_files -norecurse my_timer_tb.v
pwd
cd src
add_files -norecurse my_timer_tb.v
cd ..
update_compile_order -fileset sources_1
# Disabling source management mode.  This is to allow the top design properties to be set without GUI intervention.
set_property source_mgmt_mode None [current_project]
set_property top my_timer_tb [get_filesets sim_1]
set_property top_lib xil_defaultlib [get_filesets sim_1]
# Re-enabling previously disabled source management mode.
set_property source_mgmt_mode All [current_project]
launch_simulation
source my_timer_tb.tcl
close_sim
launch_simulation
source my_timer_tb.tcl
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
run 1 ns
current_wave_config {Untitled 2}
add_wave {{/my_timer_tb/my_time/timer_a/en}} 
current_wave_config {Untitled 2}
add_wave {{/my_timer_tb/my_time/timer_b/en}} 
current_wave_config {Untitled 2}
add_wave {{/my_timer_tb/my_time/timer_c/en}} 
restart
run 100 ns
run 100 ns
run 100 ns
run 100 ns
run 100 ns
run 100 ns
open_bd_design {/home/taylor/Documents/new_spgd/tmp/new_spgd/new_spgd.srcs/sources_1/bd/system/system.bd}
connect_bd_net [get_bd_pins axi_gpio_1/gpio_io_i] [ADC_REG/a_data_out]
connect_bd_net [get_bd_pins PS7/axi_gpio_0/gpio2_io_i] [get_bd_pins ADC_BLOCK/ADC_REG/a_data_out]
save_bd_design
reset_run synth_1
launch_runs impl_1 -to_step write_bitstream -jobs 16
wait_on_run impl_1
reset_run synth_1
launch_runs impl_1 -to_step write_bitstream -jobs 16
wait_on_run impl_1
regenerate_bd_layout
regenerate_bd_layout
regenerate_bd_layout
connect_bd_net [get_bd_ports dac_spi_clk_o] [get_bd_pins my_timer/val_0]
update_module_reference system_my_timer_0
connect_bd_net [get_bd_ports dac_spi_clk_o] [get_bd_pins my_timer/val_0]
connect_bd_net [get_bd_ports dac_spi_csb_o] [get_bd_pins my_timer/val_0]
connect_bd_net [get_bd_ports dac_spi_reset_o] [get_bd_pins my_timer/val_0]
connect_bd_net [get_bd_ports dac_spi_sdio_o] [get_bd_pins my_timer/val_1]
regenerate_bd_layout
regenerate_bd_layout
connect_bd_net [get_bd_pins my_timer/val_1] [get_bd_ports dac_spi_sdio_o]
regenerate_bd_layout
delete_bd_objs [get_bd_nets gpio2_io_i_1]
connect_bd_net [get_bd_pins PS7/axi_gpio_0/gpio2_io_i] [get_bd_pins my_timer/GP_OUT]
update_module_reference system_my_timer_0
connect_bd_net [get_bd_pins PS7/axi_gpio_0/gpio2_io_i] [get_bd_pins my_timer/GP_OUT]
save_bd_design
reset_run synth_1
launch_runs impl_1 -to_step write_bitstream -jobs 16
wait_on_run impl_1
close_sim
